<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/head', { title: "Edit game" }) %>
</head>

<body class="bg-form">
    <%- include('nav-bar') %>
        <form class="signup-form" action="/products/edit/<%= game.id %>?_method=PUT" method="POST"
            enctype="multipart/form-data">
            <h2 class="form-create-product">Editar Juego</h2>
            <label for="title">
                <input type="text" name="title" id="title" value="<%= game.title %>">
                <% if (locals.errors && errors.title){%>
                    <span class="error">
                        <%= errors.title.msg %>
                    </span>
                    <%}%>
            </label>
            <label for="description">
                <textarea name="description" id="description" cols="38" rows="5"><%= game.description %></textarea>
                <% if (locals.errors && errors.description){%>
                    <span class="error">
                        <%= errors.description.msg %>
                    </span>
                    <%}%>
            </label>
            <label for="price">
                <input type="number" name="price" id="price" value="<%= game.price.toFixed(3) %>">
                <% if (locals.errors && errors.price){%>
                    <span class="error">
                        <%= errors.price.msg %>
                    </span>
                    <%}%>
            </label>
            <label for="discount">
                <input type="number" name="discount" id="discount" value="<%= game.discount %>">
                <% if (locals.errors && errors.discount){%>
                    <span class="error">
                        <%= errors.discount.msg %>
                    </span>
                    <%}%>
            </label>
            <label for="imgCard">
                <input type="file" name="imgCard" id="imgCard" placeholder="Imagen para inicio">
            </label>
            <label for="ratingAge">
                <input type="number" min="0" max="21" name="ratingAge" id="ratingAge" value="<%= game.rating_age %>">
            </label>

            <select name="genre" id="">
                <option value="">Generos</option>
                <% genres.forEach((genre)=> { %>
                    <option value="<%= genre.id %>" <%=(game.genre.id==genre.id)?'selected':null %>><%= genre.title %>
                    </option>
                    <% }) %>
            </select>
            <% if (locals.errors && errors.genre){%>
                <span class="error">
                    <%= errors.genre.msg %>
                </span>
                <%}%>
                    <p>Plataforma</p>
                    <p>Xbox:</p>
                    <label for="XboxSi">
                        <input
                            <% if (game.xbox == '1') { %>
                                checked
                            <% } %>
                            type="radio" 
                            name="xbox" 
                            value="1"
                            id="XboxSi"
                            class="checkbox-product" >
                        Si
                    </label>
                    <label for="XboxNo">
                        <input 
                            <% if (game.xbox == '0') { %>
                                checked
                            <% } %>
                            type="radio" 
                            name="xbox" 
                            value="0"
                            id="XboxNo"
                            class="checkbox-product" >
                        No
                    </label>
                    <p>Pc:</p>
                    <label for="PcSi">
                        <input
                            <% if (game.pc == '1') { %>
                                checked
                            <% } %>
                            type="radio" 
                            name="pc" 
                            value="1"
                            id="PcSi"
                            class="checkbox-product" >
                        Si
                    </label>
                    <label for="PcNo">
                        <input 
                            <% if (game.pc == '0') { %>
                                checked
                            <% } %>
                            type="radio" 
                            name="pc" 
                            value="0"
                            id="PcNo"
                            class="checkbox-product" >
                        No
                    </label>
                    <p>Play Station:</p>
                    <label for="playSi">
                        <input
                            <% if (game.playstation == '1') { %>
                                checked
                            <% } %>
                            type="radio" 
                            name="play" 
                            value="1"
                            id="playSi"
                            class="checkbox-product" >
                        Si
                    </label>
                    <label for="playNo">
                        <input 
                            <% if (game.playstation == '0') { %>
                                checked
                            <% } %>
                            type="radio" 
                            name="play" 
                            value="0"
                            id="playNo"
                            class="checkbox-product" >
                        No
                    </label>
                    <% if (locals.errors && errors.platform){%>
                        <span class="error">
                            <%= errors.platform.msg %>
                        </span>
                        <%}%>
                            <button type="submit">Editar</button>
        </form>
        <form 
            class="signup-form" 
            action="/products/edit/<%= game.id %>?_method=DELETE" 
            method="POST"
            >
            <button type="submit" style="background-color: red;">Eliminar</button>
        </form>
</body>

</html>